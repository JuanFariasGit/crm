{% extends "core/model-page.html" %}

{% block content %}
{% csrf_token %}
<h5 class="text-center">LISTA DE PRODUTOS</h5>
<a class="btn btn-primary mb-3" href="{% url 'product:create' %}"><i class="fas fa-plus-circle fa-lg"></i></a>
<div class="table-responsive">  
  <table id="table" class="table table-striped table-bordered text-center">
    <thead>
      <tr>
        <th>Código do Produto</th>
        <th>Item</th>
        <th>Unidade de Medida</th>
        <th>Custo Unitario</th>
        <th>Preço Unitario</th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th>Código do Produto</th>
        <th>Item</th>
        <th>Unidade de Medida</th>
        <th>Custo Unitario</th>
        <th>Preço Unitario</th>
      </tr>
    </tfoot>
  </table>
</div>
{% endblock %}


{% block script %} 
<script>
  const cookie = document.cookie
  const csrf_token = cookie.split("=")[1]

  const table = $('#table').DataTable( {
        "columnDefs": [{
        "targets": [  ],
        "orderable": false
        }],
        "order": [[ 0, "desc" ]],
        "ajax": {
          "method": "POST",
          "url": "{% url 'product:list' %}",
          "headers": {
                "X-CSRFToken": csrf_token,
            }
        },
        "columns": [
            {"data":"Código do Produto"},
            {"data":"Item"},
            {"data":"Unidade de Medida"},
            {"data":"Custo Unitario"},
            {"data":"Preço Unitario"}
        ],
        "lengthMenu": [[5, 10, 15], [5, 10, 15]],
        "language": {
            "infoFiltered":   "(filtrado do total de _MAX_ entradas)",
            "zeroRecords": "Nenhum registro correspondente encontrado",
            "loadingRecords": "Carregando...",
            "lengthMenu": "_MENU_ registros por página",
            "info": "Mostrando _START_ até _END_ de _TOTAL_ registros",
            "search": "Pesquisar",
            "paginate": {
            "next":  "›",
            "previous": "‹"
            }
        },
    });
</script>
{% endblock %}